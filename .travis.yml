language: java
before_deploy:
- git config --local user.name "MrMaurice211"
- git config --local user.email "t_ulu_m@live.com.mx"
- export GRADLE_PATH=./build.gradle
- export GRADLE_FIELD="version"
- export VERSION_TMP=$(grep $GRADLE_FIELD $GRADLE_PATH | awk '{print $2}')
- export VERSION=$(echo $VERSION_TMP | sed -e 's/^"//'  -e 's/"$//')
- export GIT_TAG=$VERSION
- git tag $GIT_TAG
before_cache:
- rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
  - "$HOME/.gradle/caches/"
  - "$HOME/.gradle/wrapper/"
install: "./gradlew clean assemble"
deploy:
  provider: releases
  file_glob: true
  skip_cleanup: true
  api_key:
    secure: M3hCT7xErqItf/ecjxShl5mE5HG/d7KMRcZu9FX9NH5h7UytlgqwZHbvXzf0VN+RgtRrLhsEOrLRJS4wOqalTO5Kq3uphSpIZ8uDbyiXA4l+5QFIi16z1/QbEQo5LgSBnbTEx9c8f9sT8PfSH/LotjGL5iLwzeUpEmTZX8SQuCYriZ5VwgSKJTXmWHtx6zMIPkaK8YjRy2uhsN1ybZ6pt7FQjaNJS5Hb9hiwJaeRX5h3iJ1cZa9zEZbcOML7gbcnev9F7Zq8dZVbhWfYWndtW4M4Zf4/n7b5sgaWKftqLx9T/A2GLRDmotZZbvvbFAQ10yjEU3g0EcxZenAjq74azBqXUutPEku2F0ZZe2GGgELa/HleqLh6OX861ql9gDaX71b1SeaYLUaZyx10G1GWLgpsj9P+6ylWritRPpzuK6AYQAvb+hNvhV0Vc7H6F8bAIjQzpa2EL63BAZ0rf0QiXz3iq3ytTcTKebrLGjA+1Ko252+ftQ1hjccfWssQLQvOCQWs/c9JKietW49ZoU7KTa5OsJfZxOiL/BO34PsTOSCFlavRsoJ5GBs1/R6vsJtnP9FG+GuBsoMliZDjFXO7Ut1PAp4/tB01MSKKJq343v4hfeF9NQU2DH9MdJxQquihgIrGIcgdBsO2jpuJ5zhN2+uNVtpEdTpz3KheU+rI8Kk=
  file: build/libs/*.jar
  on:
    repo: MrMaurice211/CommandLib
